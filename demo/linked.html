<!doctype html>
<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
</head>

<title>Linked Charts Example</title>

<link rel="stylesheet" type="text/css" href="./parcoords.css">
<link rel="stylesheet" type="text/css" href="style.css">

<script src="./lib/d3.v5.min.js"></script>
<script src="./parasol.standalone.js"></script>

<body>
<p>Demonstrates linking multiple charts for connected interactivity. Brush along any axis and watch as all charts respond accordingly.</p>

<p>
    <button id="reset_brushes">Reset Brushes</button>
</p>


<div id="plot01" class="parcoords" style="height:200px; width:800px;"></div>
<div id="plot02" class="parcoords" style="height:200px; width:800px;"></div>
<div id="plot03" class="parcoords" style="height:200px; width:800px;"></div>
</body>

<script>
d3.csv('data/cars.csv').then(function(data) {
  var ps = Parasol(data)('.parcoords')
            .linked();  // all charts linked by default
            // .linked(chartIDs = [0,1]);  // only link first two charts

  // update charts
  ps.charts.forEach(
    (pc) => {
      pc
        // .hideAxis(['name'])  // no longer applicable, removed 'name' column from cars.csv
        .render()
        .updateAxes(0)
    }
  )

  // TODO: brush reset is not working
  d3.select('#reset_brushes').on('click', function() {
    ps.resetSelections('brushed');  //  reset all brushes
    // ps.globalBrushReset([0,1])  // reset first two plots
  });

});
</script>
