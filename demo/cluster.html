<!doctype html>
<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
</head>

<title>Clustering Example</title>

<link rel="stylesheet" type="text/css" href="./parcoords.css">
<link rel="stylesheet" type="text/css" href="style.css">

<script src="./lib/d3.v5.min.js"></script>
<script src="./parasol.standalone.js"></script>

<body>
<p>Demonstrates basic clustering functionality.</p>
<div id="plot01" class="parcoords" style="height:200px; width:800px;"></div>
<div id="plot02" class="parcoords" style="height:200px; width:800px;"></div>
<div id="plot03" class="parcoords" style="height:200px; width:800px;"></div>
</body>

<script>
d3.csv('data/cars.csv').then(function(data) {


  // setup variables to use for clustering (data must be numeric)
  var cluster_vars = d3.keys(data[0]); // get all the variable names

  // var cluster_vars = d3.keys(data[0]) // get all the variable names
  // .filter(function(key) {   // filter out unwanted variables. specifically,
  //   return key !== 'name';  /?/ don't include cars names because not numeric data
  // });

  /* simple example (start) */
  // choose 4 clusters and color the 1st and 3rd chart
  var ps = Parasol(data)('.parcoords')
            .cluster(k=4, chartIDs=[0,2], vars=cluster_vars);
  /* simple example (end) */

  /* complex example (start) */
  //// alter each of the inputs for more control

  //// specify k-means clustering options
  // const defaultOptions = {
  //   maxIterations: 100,
  //   tolerance: 1e-6,
  //   withIterations: false,
  //   initialization: 'kmeans++'
  //   // distanceFunction: squaredEuclidean  // need to import 'squaredEuclidean'
  //       // to used this function
  // };

  // var ps = Parasol(data)('.parcoords')
  //           .cluster(k=4, chartIDs=[0,2], vars=cluster_vars,
  //           palette=d3.schemeCategory10, std=true,
  //           options=defaultOptions, hidden=false);
  /* complex example (end) */

  // palette defaults to d3.schemeCategory10, for other options test other
  // categorical color palettes provided by d3, such as:
  //    d3.schemeAccent
  //    d3.schemeDark2
  //    d3.schemePaired
  //    d3.schemePastel1
  //    d3.schemePastel2
  //    d3.schemeSet1
  //    d3.schemeSet2
  //    d3.schemeSet3

  // update charts
  ps.charts.forEach(
    (pc) => {
      pc
        // .hideAxis(['name'])  // no longer applicable, removed 'name' column from cars.csv
        .reorderable()
        .render()
        .updateAxes(0)
    }
  )
});
</script>
