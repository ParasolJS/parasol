<!doctype html>
<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <title>Basic Parallel Coordinates Example</title>

    <link rel="stylesheet" type="text/css" href="../d3.parcoords.css">
    <link rel="stylesheet" type="text/css" href="style.css">

    <script src="lib/d3.js"></script>
    <script src="../d3.parcoords.js"></script>
    <script src="https://www.lactame.com/lib/ml/2.2.0/ml.min.js"></script>
</head>

<body>
  <div id="example" class="parcoords" style="width:500px;height:150px"></div>
  <p>Demonstrates k-means clustering.</p>

<script>

  var kmeans = ML.Clust.kmeans;
  var colors = d3.scale.category20b();  // color example: http://syntagmatic.github.io/parallel-coordinates/

  let data = [
    [0,-0,0,0,0,1],
    [1,-1,1,2,1,1],
    [2,-2,4,4,0.5,1],
    [3,-3,9,6,0.33,1],
    [4,-4,16,8,0.25,1]
  ]

  let ans = kmeans(data, 3);

  for (i = 0; i < ans.clusters.length; i++) {
    data[i].push(ans.clusters[i]+1);
  }

  var parcoords = d3.parcoords()("#example")
    .data(data)
    .hideAxis(["6"])
    .color(function(d, i) {
      // d corresponds to the individual data object
      if (d[6] === 1.0) {
          return "red";
      } else if (d[6] === 2.0) {
          return "green";
      } else if (d[6] === 3.0) {
          return "blue";
      } else {
        console.log(d[6]);
        return "orange";
      }
    })
    .render()
    .createAxes();

  // function to access last selection
  // source: https://stackoverflow.com/questions/25405359/how-can-i-select-last-child-in-d3-js
  d3.selection.prototype.last = function() {
    var last = this.size() - 1;
    return d3.select(this[0][last]);
  };

</script>
</body>
